# HSCP Recasting #

## Authors: ##
[Andre Lessa](mailto:andre.lessa@ufabc.edu.br)

This repository holds the main code for recasting the 13 TeV ATLAS heavy stable charged particle
search ([ATLAS-SUSY-2018-42](http://atlas.web.cern.ch/Atlas/GROUPS/PHYSICS/PAPERS/SUSY-2018-42/))
based on the recasting details provided [here](http://atlas.web.cern.ch/Atlas/GROUPS/PHYSICS/PAPERS/SUSY-2018-42/hepdata_info.pdf).

## Pre-Requisites and Installation ##

The following pre-requisites must be installed before compiling the main code:

  * [MadGraph5](https://launchpad.net/mg5amcnlo/)
  * [Delphes](https://cp3.irmp.ucl.ac.be/projects/delphes)[^1]
  * [Pythia8](https://pythia.org/)
  * [HepMC](http://hepmc.web.cern.ch/hepmc/)

Executing:

```
./installer.sh
```

Will try to fetch the required packages and install them in the current folder.
*Note that a modified version of Delphes should be installed using [../../Delphes_LLP/DelphesLLP.tar.gz]../../Delphes_LLP/DelphesLLP.tar.gz)*


## Running ##

The recasting is based on the Delphes output generated by running MadGraph/Pythia/Delphes.
The event yields and recasting info can be obtained running:

```
./atlas_susy_2018_42_Recast.py -f <input ROOT file> -o <output file> -m <model>
```

where model is used to fetch the relevant model parameters depending on the scenario (stau, wino or gluino).
The output is a pickle file containing a Pandas DataFrame with the model parameters and recasting output.


For combining results from multiple model points into a single DataFrame, run:

```
./atlas_susy_2018_42-CombineData.py -f <pickle file1> <pickle file2> ... -o <output file>
```

Finally, for computing upper limits:

```
./atlas_susy_2018_42-UpperLimits.py -f <pickle file>  -o <output file>
```

The result is again a DataFrame, but now including an upper limit column.






:

```
./runScanMG5.py -p <parameters file>
```

The basic required input is [parameter file](./scan_parameters_0j_chargino.ini) specifying the input cards and model parameters.
The output is a Delphes ROOT file for each model point



## Validation ##


[^1]: A modified version of Delphes needs to be installed, which includes a module for filtering LLPs
      and storing their decays.  


